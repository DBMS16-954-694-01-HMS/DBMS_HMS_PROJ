{% extends 'base.html' %}
{% block title %}Patients - Admin{% endblock %}
{% block content %}
<h2>Patients</h2>
<a class="btn btn-primary" href="{{ url_for('admin.add_patient') }}">Add New Patient</a>
<table class="table mt-3">
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Phone</th>
      <th>Address</th>
      <th>Doctor</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for p in patients %}
    <tr>
      <td>{{ p.id }}</td>
      <td>{{ p.first_name }} {{ p.last_name }}</td>
      <td>{{ p.phone }}</td>
      <td>{{ p.address }}</td>
      <td>{% if p['doctor_name'] %}Dr. {{ p['doctor_name'] }}{% else %}-{% endif %}</td>
      <td>
        <a class="btn btn-sm btn-outline-primary" href="{{ url_for('admin.update_patient', pid=p.id) }}">Edit</a>
        <a class="btn btn-sm btn-outline-danger" href="{{ url_for('admin.delete_patient', pid=p.id) }}" onclick="return confirm('Delete patient?');">Delete</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}